

2018-04-02:
周例会检查项目进度，zynq平台vxworks 7代码验收检视完uboot代码、底层驱动以及学习zynq平台设备树、熟悉zynq开发环境
2018-04-03:
M4工程的app工程任务管理进行优化，任务框架已经切换到任务配置表管理架构，查找到M4新工程网络ping不通的原因为修改了RTC时钟初始化的等待时间导致初始化的时候，设置系统时间变长
2018-04-04:
M4平台开发Modbus协议栈代码，搭建Modbus协议基本框架
2018-04-05:
清明节放假
2018-04-06:

2018-04-09:
开发Modbus协议读单个寄存器，读多个寄存器功能，设置寄存器信号值公用模块，读寄存器信号值公用模块
2018-04-10:
开发Modbus协议写单个寄存器，写多个寄存器功能，解决M4工程新增任务导致的程序崩溃问题，主要是因为现在所有任务的占用内存已经超过了128K,已经将部分文件的内存使用重定向到STM32的64K的CCM内存
2018-04-11:
开发Modbus协议根据多种数据类型，存储类型，设置存储值上限，下限的来设置寄存器值的功能
2018-04-12:
重写串口驱动，兼容UART1~UART6的高内聚的通用串口驱动的初始化接口，读接口，写接口，已经使用基于任务的定时器以及UCOSIII的事件标志组解决Modbus断帧问题
2018-04-13:
搭建Modbus主、从机通信硬件环境，开发基于Modbus协议的串口主从机接收任务和发送任务
2018-04-16:
检视完成新开发的兼容UART0~UART6多路串口的串口驱动模块，正在调试485收发通信
2018-04-17:
已开发完成基于驱动配置表的可配置的通用定时器驱动，拆分所有任务各自的依赖头文件，不再引用同一个头文件，减少修改头文件后，解决多次编译多个文件耗用编译时间的问题
2018-04-18:
调试485驱动，查找两块M4单板主从机进行485通信时，收发数据不通的原因主要是因为485硬件电路PCB接收线路和发送线路画反了，飞线后就可以收发数据了
2018-04-19:
调试并查找串口断帧处理不准确的原因，讨论和优化Modbus数据表大数据量的查询算法
2018-04-20:
1.查找到串口断帧处理不准确主要是因为有两个，设置波特率时已经配置好了断帧超时时间，在初始化全局串口结构体时又初始化了一遍，导致超时时间重置为0了，已解决。

2.配合PTP通信调试
2018-04-23:
初步定位485主机和485从机之间跑Modbus协议，多任务运行一段时间后停止通信的问题为断帧事件有关，程序每次跑一段时间后断帧事件触发，但是modbus读任务未执行
2018-04-24:
查找到485主机和485从机之间跑Modbus协议，多任务运行一段时间后停止通信的问题主要是因为断帧事件所使用的硬件定时器中断服务函数中没有增加UCOSIII的中断嵌套管理接口。
2018-04-25:
在Modbus寄存器动态配置表实现了支持所有参数动态可配
2018-04-26:
实现共享内存的方式与PTP协议数据实时读写
2018-04-27:
完成Modbus寄存器结构体数组配置表的二分查找算法，提高了查询效率




2018-05-01:
五一放假
2018-05-02:
1.调试Modbus任务与PTP任务合并后跑一段时间后程序崩溃的原因，暂时确定与以太网通信以及RTC时间相关，后期再继续跟踪。
2.优化UartDriver中485发送1ms延时的处理
2018-05-03:
1.优化UartDriver中485发送1ms延时的处理，在UartDriver.c的中断服务函数中增加对“发送完成”中断标志位的判断，来判定485发送的的一帧数据的最后一个字节是否发送完成，已自测通过。

2.Modbus接收数据异常判断考虑不充分，增加读，写多个寄存器以及读写长度异常判断，并验证修改后的代码，已自测通过。

2018-05-04:
优化Modbus执行流程，减少查询数据的次数，提高查询效率，已自测通过。
2018-05-07:
搭建Modbus主机与多个Modbus从机通信硬件环境，完成Modbus多机通信环境测试用例，已自测通过
2018-05-08:
组串逆变器整机测试搭环境，测试Modbus和PTP通信完成，Modbus主机与多个Modbus从机通信正常，无丢帧
2018-05-09:
1.编写M4工程的自动化批处理编译脚本程序，可以生成app.bin文件，并且可以通过Flash Loader烧录进单板；
2.多路串口的DMA发送接收资料查询，收集；

2018-05-10:
编写兼容多路串口的DMA驱动接收模块程序，包括DMA接收初始化,DMA中断接收，已完成，待调试，优化
2018-05-11:
编写兼容多路串口的DMA驱动发送模块程序, 包括DMA发送初始化，发送，发送使能，待调试，优化
2018-05-14:
多路串口DMA驱动发送模块功能调试，问题定位，写DMA发送功能测试用例；
2018-05-15:
编写多路串口DMA驱动接收模块初始化程序，实现串口空闲中断设置DMA接收缓冲大小并调试
2018-05-16:
编写多路串口DMA驱动接收模块接收接口程序，定位串口空闲中断以及DMA方式接收数据丢帧的问题
2018-05-17:
编写多路串口DMA驱动接收模块接收接口程序，实现兼容6路串口的使用空闲中断以及DMA方式接收数据方案
2018-05-18:
熟悉DMA的FIFO模式，考虑电机控制下的串口接收方案，实现不使用串口中断，仅用DMA的FIFO模式接收数据，方案未确定，待调试
2018/05/21
考虑电机控制下的串口接收方案，实现不使用任务串口中断，仅使用DMA的FIFO模式接收数据
2018/05/22
考虑电机控制下的串口接收方案，实现不使用任务串口中断，仅使用DMA的FIFO模式接收数据，调试高于115200以上波特率接收数据失败的问题
2018/05/23
M4多路串口的DMA的FIFO模式下接收模块代码调试，921600高波特率通信数据接收时间较长原因主要是因为程序中打印数据占用时间较长，改用示波器调试
2018/05/24
经验证M4多路串口的DMA的FIFO模式下无法精确控制接收字节数，改用DMA循环模式来接收数据，并调试验证
2018/05/25
用示波器看波形，调试DMA循环模式来接收数据模块，验证DMA循环模式在921600高波特率下是可以正常接收数据
2018/05/28
写M4多路串口的DMA的普通中断模式，空闲中断+DMA模式，循环模式三种方案合并到统一串口的接口
2018/05/29
写串口的DMA双缓冲模式发送数据代码，验证发送总线无间断发送数据可用，但每次发送的帧数据必须为固定长度
2018/05/30
串口空闲中断+DMA普通模式下抓取示波器波形，写串口接收数据和发送数据方案文档
2018/05/31
串口单字节中断模式下抓取示波器波形，写串口接收数据和发送数据方案文档



2018/06/01
串口DMA轮询模式下环形缓冲区机制改为与DMA接收数据绑定机制，改进了串口DMA轮询模式下接收数据性能
2018/06/02
串口空闲中断+DMA普通模式下环形缓冲区机制改为与DMA接收数据绑定机制，DMA普通模式也改为了DMA循环模式